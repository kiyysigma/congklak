<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Congklak - Game Tradisional Indonesia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a5f23, #2d8f3d);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* Header dan Navigasi */
        .header {
            width: 100%;
            max-width: 1000px;
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border: 5px solid #8b4513;
        }

        .header h1 {
            color: #8b4513;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            color: #5d4037;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .nav-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .nav-button {
            padding: 10px 20px;
            background-color: #d2691e;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-button:hover {
            background-color: #a0522d;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        /* Kontainer Utama */
        .main-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
            max-width: 1200px;
        }

        /* Panel Game */
        .game-panel {
            flex: 1;
            min-width: 300px;
            max-width: 700px;
            background-color: rgba(255, 248, 220, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
            border: 8px solid #8b4513;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Papan Congklak */
        .board-container {
            position: relative;
            width: 100%;
            margin: 20px 0;
        }

        .board {
            display: flex;
            flex-direction: column;
            background-color: #d2691e;
            border-radius: 20px;
            padding: 20px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
            border: 5px solid #5d4037;
        }

        .player-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .player-row:last-child {
            margin-bottom: 0;
        }

        .player-store {
            width: 100px;
            height: 180px;
            background-color: #f0e68c;
            border-radius: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.2);
            border: 5px solid #8b4513;
            position: relative;
        }

        .player-store .player-name {
            position: absolute;
            top: -25px;
            font-weight: bold;
            color: #5d4037;
            background-color: #ffecb3;
            padding: 5px 15px;
            border-radius: 20px;
            border: 2px solid #8b4513;
        }

        .store-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #8b4513;
        }

        .holes-row {
            display: flex;
            flex: 1;
            justify-content: space-around;
            margin: 0 20px;
        }

        .hole {
            width: 70px;
            height: 70px;
            background-color: #f0e68c;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
            border: 4px solid #8b4513;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .hole:hover {
            transform: scale(1.05);
            background-color: #ffecb3;
        }

        .hole.active {
            border-color: #ff5722;
            box-shadow: 0 0 15px #ff5722;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 10px #ff5722; }
            50% { box-shadow: 0 0 20px #ff5722; }
            100% { box-shadow: 0 0 10px #ff5722; }
        }

        .hole-count {
            font-size: 1.8rem;
            font-weight: bold;
            color: #5d4037;
        }

        .hole-number {
            position: absolute;
            bottom: -20px;
            font-size: 0.9rem;
            color: #5d4037;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Panel Info dan Kontrol */
        .info-panel {
            flex: 1;
            min-width: 300px;
            max-width: 400px;
            background-color: rgba(255, 248, 220, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
            border: 8px solid #8b4513;
            display: flex;
            flex-direction: column;
        }

        .info-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px dashed #8b4513;
        }

        .info-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .info-section h2 {
            color: #8b4513;
            margin-bottom: 15px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-section h2 i {
            color: #d2691e;
        }

        .player-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffecb3;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            border: 2px solid #d2691e;
        }

        .player-info.active {
            border-color: #ff5722;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }

        .player-name-display {
            font-weight: bold;
            font-size: 1.2rem;
            color: #5d4037;
        }

        .player-score {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8b4513;
        }

        .status-message {
            background-color: #ffecb3;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #5d4037;
            margin-top: 15px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #d2691e;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .control-btn {
            flex: 1;
            min-width: 120px;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .control-btn i {
            font-size: 1.2rem;
        }

        .btn-primary {
            background-color: #4caf50;
            color: white;
        }

        .btn-primary:hover {
            background-color: #388e3c;
            transform: translateY(-3px);
        }

        .btn-secondary {
            background-color: #ff9800;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #f57c00;
            transform: translateY(-3px);
        }

        .btn-danger {
            background-color: #f44336;
            color: white;
        }

        .btn-danger:hover {
            background-color: #d32f2f;
            transform: translateY(-3px);
        }

        /* Aturan Permainan */
        .rules-list {
            list-style-type: none;
            padding-left: 10px;
        }

        .rules-list li {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
            line-height: 1.5;
        }

        .rules-list li:before {
            content: "â€¢";
            color: #d2691e;
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: -3px;
        }

        /* Statistik */
        .stats-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .stat-item {
            text-align: center;
            background-color: #ffecb3;
            padding: 10px;
            border-radius: 10px;
            flex: 1;
            margin: 0 5px;
            border: 2px solid #d2691e;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #8b4513;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #5d4037;
            margin-top: 5px;
        }

        /* Footer */
        .footer {
            margin-top: 30px;
            text-align: center;
            color: white;
            font-size: 1rem;
            max-width: 1000px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            width: 100%;
        }

        .footer a {
            color: #ffecb3;
            text-decoration: none;
            font-weight: bold;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsif */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }
            
            .game-panel, .info-panel {
                max-width: 100%;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .hole {
                width: 55px;
                height: 55px;
            }
            
            .store-count {
                font-size: 2rem;
            }
            
            .hole-count {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .hole {
                width: 45px;
                height: 45px;
            }
            
            .player-store {
                width: 80px;
                height: 150px;
            }
            
            .control-btn {
                min-width: 100%;
            }
            
            .nav-button {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
        }

        /* Animasi biji */
        .seed {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #8b4513;
            border-radius: 50%;
            opacity: 0.8;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border: 5px solid #8b4513;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #8b4513;
            padding-bottom: 15px;
        }

        .modal-title {
            color: #8b4513;
            font-size: 1.8rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: #8b4513;
            cursor: pointer;
        }

        .modal-body {
            line-height: 1.6;
            color: #5d4037;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1><i class="fas fa-seedling"></i> CONGKAK <i class="fas fa-seedling"></i></h1>
        <p>Game tradisional Indonesia yang dimainkan dengan biji-bijian di papan kayu berlubang</p>
        <div class="nav-container">
            <button class="nav-button" id="rulesBtn"><i class="fas fa-book"></i> Aturan Permainan</button>
            <button class="nav-button" id="historyBtn"><i class="fas fa-history"></i> Sejarah Congklak</button>
            <button class="nav-button" id="settingsBtn"><i class="fas fa-cog"></i> Pengaturan</button>
        </div>
    </header>

    <!-- Kontainer Utama -->
    <div class="main-container">
        <!-- Panel Game -->
        <section class="game-panel">
            <h2 style="color: #8b4513; margin-bottom: 20px; font-size: 1.8rem;">Papan Congklak</h2>
            
            <div class="board-container">
                <!-- Papan Congklak -->
                <div class="board">
                    <!-- Pemain 2 (Atas) -->
                    <div class="player-row">
                        <div class="player-store" id="player2-store">
                            <div class="player-name">Pemain 2</div>
                            <div class="store-count" id="store2">0</div>
                        </div>
                        
                        <div class="holes-row" id="player2-holes">
                            <!-- Lubang pemain 2 akan diisi oleh JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Pemain 1 (Bawah) -->
                    <div class="player-row">
                        <div class="holes-row" id="player1-holes">
                            <!-- Lubang pemain 1 akan diisi oleh JavaScript -->
                        </div>
                        
                        <div class="player-store" id="player1-store">
                            <div class="player-name">Pemain 1</div>
                            <div class="store-count" id="store1">0</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="status-message" id="statusMessage">
                Giliran: <span id="currentPlayer">Pemain 1</span>. Pilih lubang untuk memulai!
            </div>
        </section>
        
        <!-- Panel Info dan Kontrol -->
        <section class="info-panel">
            <!-- Info Pemain -->
            <div class="info-section">
                <h2><i class="fas fa-users"></i> Info Pemain</h2>
                <div class="player-info active" id="player1-info">
                    <div class="player-name-display">Pemain 1 <i class="fas fa-user"></i></div>
                    <div class="player-score">Skor: <span id="player1-score">0</span></div>
                </div>
                <div class="player-info" id="player2-info">
                    <div class="player-name-display">Pemain 2 <i class="fas fa-user"></i></div>
                    <div class="player-score">Skor: <span id="player2-score">0</span></div>
                </div>
            </div>
            
            <!-- Kontrol Game -->
            <div class="info-section">
                <h2><i class="fas fa-gamepad"></i> Kontrol Game</h2>
                <div class="controls">
                    <button class="control-btn btn-primary" id="newGameBtn">
                        <i class="fas fa-plus-circle"></i> Game Baru
                    </button>
                    <button class="control-btn btn-secondary" id="undoBtn">
                        <i class="fas fa-undo"></i> Undo
                    </button>
                    <button class="control-btn btn-danger" id="resetBtn">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                <div class="controls">
                    <button class="control-btn btn-secondary" id="hintBtn">
                        <i class="fas fa-lightbulb"></i> Petunjuk
                    </button>
                    <button class="control-btn btn-secondary" id="soundToggle">
                        <i class="fas fa-volume-up"></i> Suara: ON
                    </button>
                </div>
            </div>
            
            <!-- Statistik -->
            <div class="info-section">
                <h2><i class="fas fa-chart-bar"></i> Statistik</h2>
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="moveCount">0</div>
                        <div class="stat-label">Langkah</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="gameTime">00:00</div>
                        <div class="stat-label">Waktu</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="gamesPlayed">0</div>
                        <div class="stat-label">Game Dimainkan</div>
                    </div>
                </div>
            </div>
            
            <!-- Aturan Singkat -->
            <div class="info-section">
                <h2><i class="fas fa-info-circle"></i> Aturan Singkat</h2>
                <ul class="rules-list">
                    <li>Setiap pemain memiliki 7 lubang kecil dan 1 lubang besar (rumah)</li>
                    <li>Pilih lubang untuk mengambil semua biji dan menaburkannya satu per satu ke lubang berikutnya</li>
                    <li>Jika biji terakhir jatuh di rumah sendiri, dapatkan giliran lagi</li>
                    <li>Jika biji terakhir jatuh di lubang kosong milik sendiri, ambil biji di seberangnya</li>
                    <li>Game berakhir ketika semua lubang salah satu pemain kosong</li>
                </ul>
            </div>
        </section>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <p>Congklak - Game Tradisional Indonesia &copy; 2023 | Dibuat dengan <i class="fas fa-heart" style="color: #ff6b6b;"></i> untuk melestarikan budaya Indonesia</p>
        <p>Game ini menggunakan teknologi HTML5, CSS3, dan JavaScript murni</p>
    </footer>

    <!-- Modal untuk Aturan -->
    <div class="modal" id="rulesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-book"></i> Aturan Lengkap Congklak</h2>
                <button class="close-modal" id="closeRules">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Cara Bermain Congklak:</h3>
                <ol style="margin-left: 20px; margin-bottom: 15px;">
                    <li>Papan congklak terdiri dari 2 baris lubang kecil (masing-masing 7 lubang) dan 2 lubang besar di ujung (rumah).</li>
                    <li>Setiap lubang kecil diisi dengan 7 biji (total 98 biji).</li>
                    <li>Pemain bergantian memilih lubang dari barisnya sendiri.</li>
                    <li>Biji diambil dari lubang yang dipilih dan ditabur satu per satu ke lubang berikutnya searah jarum jam.</li>
                    <li>Jika biji terakhir jatuh di rumah sendiri, pemain dapat giliran lagi.</li>
                    <li>Jika biji terakhir jatuh di lubang kosong milik sendiri, pemain mengambil semua biji di lubang seberangnya (milik lawan) dan memasukkannya ke rumahnya.</li>
                    <li>Game berakhir ketika semua lubang salah satu pemain kosong. Pemain dengan biji terbanyak di rumahnya menang.</li>
                </ol>
                <h3>Strategi:</h3>
                <ul style="margin-left: 20px;">
                    <li>Usahakan biji terakhir selalu jatuh di rumah sendiri untuk mendapatkan giliran tambahan.</li>
                    <li>Ciptakan lubang kosong di sisi sendiri untuk mencuri biji lawan.</li>
                    <li>Perhatikan distribusi biji lawan untuk memprediksi gerakannya.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modal untuk Sejarah -->
    <div class="modal" id="historyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-history"></i> Sejarah Congklak</h2>
                <button class="close-modal" id="closeHistory">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Congklak</strong> adalah permainan tradisional yang dikenal di berbagai wilayah di Indonesia dengan nama berbeda-beda: Congklak, Dakon, atau Mancala.</p>
                
                <p>Permainan ini memiliki sejarah panjang dan diperkirakan berasal dari Timur Tengah atau Afrika, kemudian menyebar ke Asia melalui perdagangan. Di Indonesia, congklak telah dimainkan sejak zaman kerajaan dan menjadi bagian dari warisan budaya.</p>
                
                <p>Nama "congklak" sendiri diduga berasal dari bahasa Jawa "congak" yang berarti menghitung, merujuk pada aktivitas menghitung biji selama permainan.</p>
                
                <p>Permainan ini tidak hanya sebagai hiburan, tetapi juga melatih keterampilan berhitung, strategi, dan kesabaran. Biasanya dimainkan oleh anak perempuan, namun sekarang dapat dinikmati oleh semua orang.</p>
                
                <p>Di era digital, congklak tetap dilestarikan melalui adaptasi seperti game komputer dan aplikasi mobile, memastikan generasi muda tetap mengenal permainan tradisional ini.</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk Pengaturan -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-cog"></i> Pengaturan Game</h2>
                <button class="close-modal" id="closeSettings">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <h3>Nama Pemain</h3>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <div style="flex: 1;">
                            <label for="player1Name">Pemain 1:</label>
                            <input type="text" id="player1Name" value="Pemain 1" style="width: 100%; padding: 8px; border-radius: 5px; border: 2px solid #8b4513;">
                        </div>
                        <div style="flex: 1;">
                            <label for="player2Name">Pemain 2:</label>
                            <input type="text" id="player2Name" value="Pemain 2" style="width: 100%; padding: 8px; border-radius: 5px; border: 2px solid #8b4513;">
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3>Jumlah Biji Awal</h3>
                    <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <input type="range" id="seedCount" min="3" max="10" value="7" style="flex: 1;">
                        <span id="seedValue">7</span> biji per lubang
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3>Tingkat Kesulitan</h3>
                    <select id="difficulty" style="width: 100%; padding: 8px; border-radius: 5px; border: 2px solid #8b4513; margin-top: 10px;">
                        <option value="easy">Mudah (AI sederhana)</option>
                        <option value="medium">Sedang (AI menengah)</option>
                        <option value="hard">Sulit (AI sulit)</option>
                        <option value="2player">2 Pemain</option>
                    </select>
                </div>
                
                <div>
                    <h3>Tampilan</h3>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" id="animations" checked>
                            Animasi
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px;">
                            <input type="checkbox" id="highlight" checked>
                            Sorotan Lubang
                        </label>
                    </div>
                </div>
                
                <button class="control-btn btn-primary" id="saveSettings" style="margin-top: 25px; width: 100%;">
                    <i class="fas fa-save"></i> Simpan Pengaturan
                </button>
            </div>
        </div>
    </div>

    <script>
        // Elemen DOM utama
        const player1Holes = document.getElementById('player1-holes');
        const player2Holes = document.getElementById('player2-holes');
        const store1 = document.getElementById('store1');
        const store2 = document.getElementById('store2');
        const statusMessage = document.getElementById('statusMessage');
        const currentPlayerSpan = document.getElementById('currentPlayer');
        const player1Score = document.getElementById('player1-score');
        const player2Score = document.getElementById('player2-score');
        const player1Info = document.getElementById('player1-info');
        const player2Info = document.getElementById('player2-info');
        const moveCount = document.getElementById('moveCount');
        const gameTime = document.getElementById('gameTime');
        const gamesPlayed = document.getElementById('gamesPlayed');
        
        // Modal
        const rulesModal = document.getElementById('rulesModal');
        const historyModal = document.getElementById('historyModal');
        const settingsModal = document.getElementById('settingsModal');
        const rulesBtn = document.getElementById('rulesBtn');
        const historyBtn = document.getElementById('historyBtn');
        const settingsBtn = document.getElementById('settingsBtn');
        const closeRules = document.getElementById('closeRules');
        const closeHistory = document.getElementById('closeHistory');
        const closeSettings = document.getElementById('closeSettings');
        
        // Kontrol game
        const newGameBtn = document.getElementById('newGameBtn');
        const undoBtn = document.getElementById('undoBtn');
        const resetBtn = document.getElementById('resetBtn');
        const hintBtn = document.getElementById('hintBtn');
        const soundToggle = document.getElementById('soundToggle');
        
        // Pengaturan
        const player1NameInput = document.getElementById('player1Name');
        const player2NameInput = document.getElementById('player2Name');
        const seedCountSlider = document.getElementById('seedCount');
        const seedValue = document.getElementById('seedValue');
        const difficultySelect = document.getElementById('difficulty');
        const animationsCheckbox = document.getElementById('animations');
        const highlightCheckbox = document.getElementById('highlight');
        const saveSettingsBtn = document.getElementById('saveSettings');
        
        // State game
        let gameState = {
            player1: {
                holes: [7, 7, 7, 7, 7, 7, 7],
                store: 0,
                name: "Pemain 1"
            },
            player2: {
                holes: [7, 7, 7, 7, 7, 7, 7],
                store: 0,
                name: "Pemain 2"
            },
            currentPlayer: 1,
            gameOver: false,
            moveHistory: [],
            moveCounter: 0,
            startTime: null,
            timerInterval: null,
            gamesPlayedCount: 0,
            soundEnabled: true,
            seedsPerHole: 7
        };
        
        // Inisialisasi game
        function initGame() {
            // Reset state game
            gameState.player1.holes = Array(7).fill(gameState.seedsPerHole);
            gameState.player2.holes = Array(7).fill(gameState.seedsPerHole);
            gameState.player1.store = 0;
            gameState.player2.store = 0;
            gameState.currentPlayer = 1;
            gameState.gameOver = false;
            gameState.moveHistory = [];
            gameState.moveCounter = 0;
            
            // Reset tampilan
            updateBoard();
            updateStatus();
            updatePlayerInfo();
            moveCount.textContent = "0";
            
            // Reset timer
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            gameState.startTime = new Date();
            gameTime.textContent = "00:00";
            
            // Mulai timer
            gameState.timerInterval = setInterval(updateTimer, 1000);
            
            // Tampilkan pesan mulai
            statusMessage.textContent = `Game dimulai! ${gameState.player1.name} giliran pertama.`;
            statusMessage.style.backgroundColor = "#ffecb3";
            
            // Tambah jumlah game dimainkan
            gameState.gamesPlayedCount++;
            gamesPlayed.textContent = gameState.gamesPlayedCount;
            
            // Update nama pemain
            updatePlayerNames();
        }
        
        // Update tampilan papan
        function updateBoard() {
            // Kosongkan lubang
            player1Holes.innerHTML = '';
            player2Holes.innerHTML = '';
            
            // Buat lubang untuk pemain 1 (bawah)
            for (let i = 0; i < 7; i++) {
                const hole = document.createElement('div');
                hole.className = 'hole';
                if (!gameState.gameOver && gameState.currentPlayer === 1 && gameState.player1.holes[i] > 0) {
                    hole.classList.add('active');
                }
                
                hole.innerHTML = `
                    <div class="hole-count">${gameState.player1.holes[i]}</div>
                    <div class="hole-number">${i + 1}</div>
                `;
                
                hole.addEventListener('click', () => makeMove(1, i));
                player1Holes.appendChild(hole);
            }
            
            // Buat lubang untuk pemain 2 (atas)
            for (let i = 0; i < 7; i++) {
                const hole = document.createElement('div');
                hole.className = 'hole';
                if (!gameState.gameOver && gameState.currentPlayer === 2 && gameState.player2.holes[i] > 0) {
                    hole.classList.add('active');
                }
                
                hole.innerHTML = `
                    <div class="hole-count">${gameState.player2.holes[i]}</div>
                    <div class="hole-number">${i + 1}</div>
                `;
                
                hole.addEventListener('click', () => makeMove(2, i));
                player2Holes.appendChild(hole);
            }
            
            // Update store
            store1.textContent = gameState.player1.store;
            store2.textContent = gameState.player2.store;
            
            // Update skor
            player1Score.textContent = gameState.player1.store;
            player2Score.textContent = gameState.player2.store;
        }
        
        // Update status dan giliran
        function updateStatus() {
            if (gameState.gameOver) {
                let winner = "Seri!";
                if (gameState.player1.store > gameState.player2.store) {
                    winner = `${gameState.player1.name} menang!`;
                    statusMessage.style.backgroundColor = "#c8e6c9";
                } else if (gameState.player2.store > gameState.player1.store) {
                    winner = `${gameState.player2.name} menang!`;
                    statusMessage.style.backgroundColor = "#ffcdd2";
                } else {
                    statusMessage.style.backgroundColor = "#e0e0e0";
                }
                
                statusMessage.innerHTML = `<strong>Game Selesai!</strong> ${winner} Skor: ${gameState.player1.store} - ${gameState.player2.store}`;
                currentPlayerSpan.textContent = "Game Selesai";
            } else {
                const currentPlayerName = gameState.currentPlayer === 1 ? gameState.player1.name : gameState.player2.name;
                currentPlayerSpan.textContent = currentPlayerName;
                statusMessage.innerHTML = `Giliran: <strong>${currentPlayerName}</strong>. Pilih lubang untuk bermain!`;
                statusMessage.style.backgroundColor = "#ffecb3";
            }
        }
        
        // Update info pemain
        function updatePlayerInfo() {
            if (gameState.currentPlayer === 1) {
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
            } else {
                player1Info.classList.remove('active');
                player2Info.classList.add('active');
            }
        }
        
        // Update nama pemain
        function updatePlayerNames() {
            // Update nama di store
            document.querySelector('#player1-store .player-name').textContent = gameState.player1.name;
            document.querySelector('#player2-store .player-name').textContent = gameState.player2.name;
            
            // Update nama di info panel
            document.querySelector('#player1-info .player-name-display').innerHTML = `${gameState.player1.name} <i class="fas fa-user"></i>`;
            document.querySelector('#player2-info .player-name-display').innerHTML = `${gameState.player2.name} <i class="fas fa-user"></i>`;
        }
        
        // Update timer
        function updateTimer() {
            if (!gameState.startTime) return;
            
            const now = new Date();
            const diff = Math.floor((now - gameState.startTime) / 1000);
            const minutes = Math.floor(diff / 60).toString().padStart(2, '0');
            const seconds = (diff % 60).toString().padStart(2, '0');
            
            gameTime.textContent = `${minutes}:${seconds}`;
        }
        
        // Membuat langkah
        function makeMove(player, holeIndex) {
            if (gameState.gameOver) return;
            if (player !== gameState.currentPlayer) return;
            
            // Simpan state saat ini untuk undo
            gameState.moveHistory.push({
                player1: JSON.parse(JSON.stringify(gameState.player1)),
                player2: JSON.parse(JSON.stringify(gameState.player2)),
                currentPlayer: gameState.currentPlayer
            });
            
            // Dapatkan data pemain yang sedang bermain
            const currentPlayerData = player === 1 ? gameState.player1 : gameState.player2;
            const opponentPlayerData = player === 1 ? gameState.player2 : gameState.player1;
            
            // Ambil biji dari lubang yang dipilih
            let seeds = currentPlayerData.holes[holeIndex];
            if (seeds === 0) return; // Lubang kosong, tidak bisa dipilih
            
            currentPlayerData.holes[holeIndex] = 0;
            
            // Distribusikan biji
            let currentHole = holeIndex;
            let currentPlayer = player;
            let lastHoleWasStore = false;
            
            while (seeds > 0) {
                // Pindah ke lubang berikutnya
                currentHole++;
                
                // Jika melewati lubang terakhir di baris pemain saat ini
                if (currentHole >= 7) {
                    // Jika ini adalah pemain saat ini, tambahkan ke store
                    if (currentPlayer === player) {
                        if (currentPlayer === 1) {
                            gameState.player1.store++;
                        } else {
                            gameState.player2.store++;
                        }
                        
                        seeds--;
                        lastHoleWasStore = true;
                        
                        // Jika biji habis di store, pemain dapat giliran lagi
                        if (seeds === 0) {
                            // Pemain dapat giliran lagi
                            updateBoard();
                            updateStatus();
                            updatePlayerInfo();
                            gameState.moveCounter++;
                            moveCount.textContent = gameState.moveCounter;
                            return;
                        }
                    }
                    
                    // Ganti pemain dan reset hole index
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                    currentHole = -1; // Akan diincrement ke 0 di iterasi berikutnya
                    continue;
                }
                
                // Tambahkan biji ke lubang
                if (currentPlayer === 1) {
                    gameState.player1.holes[currentHole]++;
                } else {
                    gameState.player2.holes[currentHole]++;
                }
                
                seeds--;
                lastHoleWasStore = false;
            }
            
            // Setelah selesai mendistribusikan biji
            // Periksa apakah biji terakhir jatuh di lubang kosong milik sendiri
            if (!lastHoleWasStore && currentPlayer === player) {
                const currentPlayerData = player === 1 ? gameState.player1 : gameState.player2;
                const opponentPlayerData = player === 1 ? gameState.player2 : gameState.player1;
                
                // Jika biji terakhir membuat lubang menjadi berisi 1 biji (sebelumnya kosong)
                if (currentPlayerData.holes[currentHole] === 1) {
                    // Ambil biji di seberangnya
                    const oppositeHoleIndex = 6 - currentHole;
                    const capturedSeeds = opponentPlayerData.holes[oppositeHoleIndex];
                    
                    if (capturedSeeds > 0) {
                        // Tambahkan ke store pemain
                        if (player === 1) {
                            gameState.player1.store += capturedSeeds + 1;
                        } else {
                            gameState.player2.store += capturedSeeds + 1;
                        }
                        
                        // Kosongkan kedua lubang
                        currentPlayerData.holes[currentHole] = 0;
                        opponentPlayerData.holes[oppositeHoleIndex] = 0;
                    }
                }
            }
            
            // Ganti giliran pemain
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            
            // Periksa apakah game selesai
            checkGameOver();
            
            // Update tampilan
            updateBoard();
            updateStatus();
            updatePlayerInfo();
            gameState.moveCounter++;
            moveCount.textContent = gameState.moveCounter;
        }
        
        // Periksa apakah game selesai
        function checkGameOver() {
            // Periksa apakah semua lubang pemain 1 kosong
            const player1Empty = gameState.player1.holes.every(hole => hole === 0);
            const player2Empty = gameState.player2.holes.every(hole => hole === 0);
            
            if (player1Empty || player2Empty) {
                gameState.gameOver = true;
                
                // Tambahkan semua biji yang tersisa ke store masing-masing pemain
                gameState.player1.store += gameState.player1.holes.reduce((sum, hole) => sum + hole, 0);
                gameState.player2.store += gameState.player2.holes.reduce((sum, hole) => sum + hole, 0);
                
                // Kosongkan semua lubang
                gameState.player1.holes = Array(7).fill(0);
                gameState.player2.holes = Array(7).fill(0);
                
                // Hentikan timer
                if (gameState.timerInterval) {
                    clearInterval(gameState.timerInterval);
                }
            }
        }
        
        // Undo langkah terakhir
        function undoMove() {
            if (gameState.moveHistory.length === 0) return;
            
            const lastState = gameState.moveHistory.pop();
            gameState.player1 = lastState.player1;
            gameState.player2 = lastState.player2;
            gameState.currentPlayer = lastState.currentPlayer;
            gameState.gameOver = false;
            gameState.moveCounter--;
            
            // Update tampilan
            updateBoard();
            updateStatus();
            updatePlayerInfo();
            moveCount.textContent = gameState.moveCounter;
        }
        
        // Event listeners untuk modal
        rulesBtn.addEventListener('click', () => {
            rulesModal.style.display = 'flex';
        });
        
        historyBtn.addEventListener('click', () => {
            historyModal.style.display = 'flex';
        });
        
        settingsBtn.addEventListener('click', () => {
            // Isi form pengaturan dengan nilai saat ini
            player1NameInput.value = gameState.player1.name;
            player2NameInput.value = gameState.player2.name;
            seedCountSlider.value = gameState.seedsPerHole;
            seedValue.textContent = gameState.seedsPerHole;
            animationsCheckbox.checked = true;
            highlightCheckbox.checked = true;
            
            settingsModal.style.display = 'flex';
        });
        
        closeRules.addEventListener('click', () => {
            rulesModal.style.display = 'none';
        });
        
        closeHistory.addEventListener('click', () => {
            historyModal.style.display = 'none';
        });
        
        closeSettings.addEventListener('click', () => {
            settingsModal.style.display = 'none';
        });
        
        // Tutup modal saat klik di luar konten
        window.addEventListener('click', (e) => {
            if (e.target === rulesModal) rulesModal.style.display = 'none';
            if (e.target === historyModal) historyModal.style.display = 'none';
            if (e.target === settingsModal) settingsModal.style.display = 'none';
        });
        
        // Event listeners untuk kontrol game
        newGameBtn.addEventListener('click', initGame);
        
        undoBtn.addEventListener('click', undoMove);
        
        resetBtn.addEventListener('click', () => {
            if (confirm("Apakah Anda yakin ingin mereset game? Semua progres akan hilang.")) {
                initGame();
            }
        });
        
        hintBtn.addEventListener('click', () => {
            if (gameState.gameOver) return;
            
            const currentPlayerData = gameState.currentPlayer === 1 ? gameState.player1 : gameState.player2;
            const holesWithSeeds = currentPlayerData.holes.map((seeds, index) => ({seeds, index})).filter(hole => hole.seeds > 0);
            
            if (holesWithSeeds.length === 0) return;
            
            // Pilih lubang secara acak untuk petunjuk
            const randomHole = holesWithSeeds[Math.floor(Math.random() * holesWithSeeds.length)];
            
            statusMessage.innerHTML = `Petunjuk: Coba pilih lubang <strong>${randomHole.index + 1}</strong> dengan ${randomHole.seeds} biji.`;
            statusMessage.style.backgroundColor = "#bbdefb";
        });
        
        soundToggle.addEventListener('click', () => {
            gameState.soundEnabled = !gameState.soundEnabled;
            soundToggle.innerHTML = gameState.soundEnabled ? 
                `<i class="fas fa-volume-up"></i> Suara: ON` : 
                `<i class="fas fa-volume-mute"></i> Suara: OFF`;
        });
        
        // Event listeners untuk pengaturan
        seedCountSlider.addEventListener('input', () => {
            seedValue.textContent = seedCountSlider.value;
        });
        
        saveSettingsBtn.addEventListener('click', () => {
            // Simpan pengaturan
            gameState.player1.name = player1NameInput.value || "Pemain 1";
            gameState.player2.name = player2NameInput.value || "Pemain 2";
            gameState.seedsPerHole = parseInt(seedCountSlider.value);
            
            // Update tampilan
            updatePlayerNames();
            
            // Mulai game baru dengan pengaturan baru
            initGame();
            
            // Tutup modal
            settingsModal.style.display = 'none';
            
            // Tampilkan konfirmasi
            alert("Pengaturan berhasil disimpan! Game baru telah dimulai.");
        });
        
        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
            
            // Tambah efek visual untuk biji
            createSeedEffects();
        });
        
        // Fungsi untuk membuat efek visual biji
        function createSeedEffects() {
            const board = document.querySelector('.board-container');
            
            // Hapus biji yang ada
            document.querySelectorAll('.seed').forEach(seed => seed.remove());
            
            // Tambah biji-biji dekoratif
            for (let i = 0; i < 30; i++) {
                const seed = document.createElement('div');
                seed.className = 'seed';
                seed.style.left = `${Math.random() * 100}%`;
                seed.style.top = `${Math.random() * 100}%`;
                seed.style.width = `${Math.random() * 10 + 5}px`;
                seed.style.height = seed.style.width;
                seed.style.backgroundColor = `rgb(${Math.random() * 50 + 150}, ${Math.random() * 50 + 100}, ${Math.random() * 50 + 50})`;
                seed.style.opacity = Math.random() * 0.5 + 0.3;
                
                board.appendChild(seed);
            }
        }
        
        // Tambahkan efek hover untuk lubang
        document.addEventListener('mouseover', (e) => {
            if (e.target.classList.contains('hole')) {
                if (gameState.gameOver) return;
                
                const hole = e.target;
                const holeCount = hole.querySelector('.hole-count');
                const count = parseInt(holeCount.textContent);
                
                if (count > 0) {
                    hole.style.transform = 'scale(1.1)';
                    hole.style.boxShadow = '0 0 15px rgba(255, 215, 0, 0.7)';
                }
            }
        });
        
        document.addEventListener('mouseout', (e) => {
            if (e.target.classList.contains('hole')) {
                const hole = e.target;
                hole.style.transform = '';
                hole.style.boxShadow = '';
            }
        });
    </script>
</body>
</html>
